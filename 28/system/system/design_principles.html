<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.32.2">
    <meta name="project" content="Erlang System Documentation v28.0-rc0">


    <title>Overview — Erlang System Documentation v28.0-rc0</title>
    <link rel="stylesheet" href="dist/html-erlang-EBZIIHAS.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-976EDCF5.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-BHYOTRCH.js"></script>


  </head>
  <body data-type="extras" class="page-extra">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="Erlang System Documentation" />
        </a>

      <div>
        <a href="../index.html" class="sidebar-projectName" translate="no">
Erlang System Documentation
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v28.0-rc0
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Erlang System Documentation</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/erlang/otp/blob/master/system/doc/design_principles/design_principles.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>


    <span>Overview</span>
  </h1>

<p><a href="" id="otp-design-principles"></a></p><p>The <em>OTP Design Principles</em> define how to structure Erlang code in terms of
processes, modules, and directories.</p><h2 id="supervision-trees" class="section-heading">
  <a href="#supervision-trees" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Supervision Trees</span>
</h2>
<p>A basic concept in Erlang/OTP is the <em>supervision tree</em>. This is a process
structuring model based on the idea of <em>workers</em> and <em>supervisors</em>:</p><ul><li>Workers are processes that perform computations and other actual work.</li><li>Supervisors are processes that monitor workers. A supervisor
can restart a worker if something goes wrong.</li><li>The supervision tree is a hierarchical arrangement of code into supervisors
and workers, which makes it possible to design and program fault-tolerant
software.</li></ul><p>In the following figure, square boxes represents supervisors and circles
represent workers:</p><p><a href="" id="sup6"></a></p><pre><code class="mermaid">---
title: Supervision Tree
---
flowchart
    sup1[Type 1 Supervisor] --- sup2[Type 1 Supervisor] --- worker1((worker))
    sup1 --- sup1a[Type A Supervisor]

    sup1a --- sup2a[Type A Supervisor] --- worker2((worker))
    sup1a --- sup3[Type 1 Supervisor]

    sup3 --- worker3((worker))
    sup3 --- worker4((worker))</code></pre><h2 id="behaviours" class="section-heading">
  <a href="#behaviours" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Behaviours</span>
</h2>
<p>In a supervision tree, many of the processes have similar structures
and follow similar patterns. For example, the supervisors share a
similar structure, with the sole distinction lying in the child
processes they supervise. Many of the workers are servers in a
server-client relation, finite-state machines, or event handlers.</p><p><em>Behaviours</em> are formalizations of these common patterns. The idea is to divide
the code for a process in a generic part (a behaviour module) and a specific
part (a <em>callback module</em>).</p><p>The behaviour module is part of Erlang/OTP. To implement a process such as a
supervisor, the user only needs to implement the callback module, which is to
export a pre-defined set of functions, the <em>callback functions</em>.</p><p>The following example illustrate how code can be divided into a generic and a
specific part. Consider the following code (written in plain Erlang) for a
simple server, which keeps track of a number of &quot;channels&quot;. Other processes can
allocate and free the channels by calling the functions <code class="inline">alloc/0</code> and <code class="inline">free/1</code>,
respectively.</p><p><a href="" id="ch1"></a></p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="6492435592-1">(</span><span class="ss">ch1</span><span class="p" data-group-id="6492435592-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="6492435592-2">(</span><span class="p" data-group-id="6492435592-3">[</span><span class="ss">start</span><span class="p">/</span><span class="mi">0</span><span class="p" data-group-id="6492435592-3">]</span><span class="p" data-group-id="6492435592-2">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="6492435592-4">(</span><span class="p" data-group-id="6492435592-5">[</span><span class="ss">alloc</span><span class="p">/</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">free</span><span class="p">/</span><span class="mi">1</span><span class="p" data-group-id="6492435592-5">]</span><span class="p" data-group-id="6492435592-4">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="6492435592-6">(</span><span class="p" data-group-id="6492435592-7">[</span><span class="ss">init</span><span class="p">/</span><span class="mi">0</span><span class="p" data-group-id="6492435592-7">]</span><span class="p" data-group-id="6492435592-6">)</span><span class="p">.</span><span class="w">

</span><span class="nf">start</span><span class="p" data-group-id="6492435592-8">(</span><span class="p" data-group-id="6492435592-8">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">spawn</span><span class="p" data-group-id="6492435592-9">(</span><span class="ss">ch1</span><span class="p">,</span><span class="w"> </span><span class="ss">init</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6492435592-10">[</span><span class="p" data-group-id="6492435592-10">]</span><span class="p" data-group-id="6492435592-9">)</span><span class="p">.</span><span class="w">

</span><span class="nf">alloc</span><span class="p" data-group-id="6492435592-11">(</span><span class="p" data-group-id="6492435592-11">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="ss">ch1</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p" data-group-id="6492435592-12">{</span><span class="nf">self</span><span class="p" data-group-id="6492435592-13">(</span><span class="p" data-group-id="6492435592-13">)</span><span class="p">,</span><span class="w"> </span><span class="ss">alloc</span><span class="p" data-group-id="6492435592-12">}</span><span class="p">,</span><span class="w">
    </span><span class="k">receive</span><span class="w">
        </span><span class="p" data-group-id="6492435592-14">{</span><span class="ss">ch1</span><span class="p">,</span><span class="w"> </span><span class="n">Res</span><span class="p" data-group-id="6492435592-14">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
            </span><span class="n">Res</span><span class="w">
    </span><span class="k">end</span><span class="p">.</span><span class="w">

</span><span class="nf">free</span><span class="p" data-group-id="6492435592-15">(</span><span class="n">Ch</span><span class="p" data-group-id="6492435592-15">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="ss">ch1</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p" data-group-id="6492435592-16">{</span><span class="ss">free</span><span class="p">,</span><span class="w"> </span><span class="n">Ch</span><span class="p" data-group-id="6492435592-16">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">ok</span><span class="p">.</span><span class="w">

</span><span class="nf">init</span><span class="p" data-group-id="6492435592-17">(</span><span class="p" data-group-id="6492435592-17">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">register</span><span class="p" data-group-id="6492435592-18">(</span><span class="ss">ch1</span><span class="p">,</span><span class="w"> </span><span class="nf">self</span><span class="p" data-group-id="6492435592-19">(</span><span class="p" data-group-id="6492435592-19">)</span><span class="p" data-group-id="6492435592-18">)</span><span class="p">,</span><span class="w">
    </span><span class="n">Chs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">channels</span><span class="p" data-group-id="6492435592-20">(</span><span class="p" data-group-id="6492435592-20">)</span><span class="p">,</span><span class="w">
    </span><span class="nf">loop</span><span class="p" data-group-id="6492435592-21">(</span><span class="n">Chs</span><span class="p" data-group-id="6492435592-21">)</span><span class="p">.</span><span class="w">

</span><span class="nf">loop</span><span class="p" data-group-id="6492435592-22">(</span><span class="n">Chs</span><span class="p" data-group-id="6492435592-22">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="k">receive</span><span class="w">
        </span><span class="p" data-group-id="6492435592-23">{</span><span class="n">From</span><span class="p">,</span><span class="w"> </span><span class="ss">alloc</span><span class="p" data-group-id="6492435592-23">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
            </span><span class="p" data-group-id="6492435592-24">{</span><span class="n">Ch</span><span class="p">,</span><span class="w"> </span><span class="n">Chs2</span><span class="p" data-group-id="6492435592-24">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">alloc</span><span class="p" data-group-id="6492435592-25">(</span><span class="n">Chs</span><span class="p" data-group-id="6492435592-25">)</span><span class="p">,</span><span class="w">
            </span><span class="n">From</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p" data-group-id="6492435592-26">{</span><span class="ss">ch1</span><span class="p">,</span><span class="w"> </span><span class="n">Ch</span><span class="p" data-group-id="6492435592-26">}</span><span class="p">,</span><span class="w">
            </span><span class="nf">loop</span><span class="p" data-group-id="6492435592-27">(</span><span class="n">Chs2</span><span class="p" data-group-id="6492435592-27">)</span><span class="p">;</span><span class="w">
        </span><span class="p" data-group-id="6492435592-28">{</span><span class="ss">free</span><span class="p">,</span><span class="w"> </span><span class="n">Ch</span><span class="p" data-group-id="6492435592-28">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
            </span><span class="n">Chs2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">free</span><span class="p" data-group-id="6492435592-29">(</span><span class="n">Ch</span><span class="p">,</span><span class="w"> </span><span class="n">Chs</span><span class="p" data-group-id="6492435592-29">)</span><span class="p">,</span><span class="w">
            </span><span class="nf">loop</span><span class="p" data-group-id="6492435592-30">(</span><span class="n">Chs2</span><span class="p" data-group-id="6492435592-30">)</span><span class="w">
    </span><span class="k">end</span><span class="p">.</span></code></pre><p>The code for the server can be rewritten into a generic part <code class="inline">server.erl</code>:</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="9343847756-1">(</span><span class="ss">server</span><span class="p" data-group-id="9343847756-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="9343847756-2">(</span><span class="p" data-group-id="9343847756-3">[</span><span class="ss">start</span><span class="p">/</span><span class="mi">1</span><span class="p" data-group-id="9343847756-3">]</span><span class="p" data-group-id="9343847756-2">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="9343847756-4">(</span><span class="p" data-group-id="9343847756-5">[</span><span class="ss">call</span><span class="p">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">cast</span><span class="p">/</span><span class="mi">2</span><span class="p" data-group-id="9343847756-5">]</span><span class="p" data-group-id="9343847756-4">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="9343847756-6">(</span><span class="p" data-group-id="9343847756-7">[</span><span class="ss">init</span><span class="p">/</span><span class="mi">1</span><span class="p" data-group-id="9343847756-7">]</span><span class="p" data-group-id="9343847756-6">)</span><span class="p">.</span><span class="w">

</span><span class="nf">start</span><span class="p" data-group-id="9343847756-8">(</span><span class="n">Mod</span><span class="p" data-group-id="9343847756-8">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">spawn</span><span class="p" data-group-id="9343847756-9">(</span><span class="ss">server</span><span class="p">,</span><span class="w"> </span><span class="ss">init</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9343847756-10">[</span><span class="n">Mod</span><span class="p" data-group-id="9343847756-10">]</span><span class="p" data-group-id="9343847756-9">)</span><span class="p">.</span><span class="w">

</span><span class="nf">call</span><span class="p" data-group-id="9343847756-11">(</span><span class="n">Name</span><span class="p">,</span><span class="w"> </span><span class="n">Req</span><span class="p" data-group-id="9343847756-11">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">Name</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p" data-group-id="9343847756-12">{</span><span class="ss">call</span><span class="p">,</span><span class="w"> </span><span class="nf">self</span><span class="p" data-group-id="9343847756-13">(</span><span class="p" data-group-id="9343847756-13">)</span><span class="p">,</span><span class="w"> </span><span class="n">Req</span><span class="p" data-group-id="9343847756-12">}</span><span class="p">,</span><span class="w">
    </span><span class="k">receive</span><span class="w">
        </span><span class="p" data-group-id="9343847756-14">{</span><span class="n">Name</span><span class="p">,</span><span class="w"> </span><span class="n">Res</span><span class="p" data-group-id="9343847756-14">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
            </span><span class="n">Res</span><span class="w">
    </span><span class="k">end</span><span class="p">.</span><span class="w">

</span><span class="nf">cast</span><span class="p" data-group-id="9343847756-15">(</span><span class="n">Name</span><span class="p">,</span><span class="w"> </span><span class="n">Req</span><span class="p" data-group-id="9343847756-15">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">Name</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p" data-group-id="9343847756-16">{</span><span class="ss">cast</span><span class="p">,</span><span class="w"> </span><span class="n">Req</span><span class="p" data-group-id="9343847756-16">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">ok</span><span class="p">.</span><span class="w">

</span><span class="nf">init</span><span class="p" data-group-id="9343847756-17">(</span><span class="n">Mod</span><span class="p" data-group-id="9343847756-17">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">register</span><span class="p" data-group-id="9343847756-18">(</span><span class="n">Mod</span><span class="p">,</span><span class="w"> </span><span class="nf">self</span><span class="p" data-group-id="9343847756-19">(</span><span class="p" data-group-id="9343847756-19">)</span><span class="p" data-group-id="9343847756-18">)</span><span class="p">,</span><span class="w">
    </span><span class="n">State</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Mod</span><span class="p">:</span><span class="nf">init</span><span class="p" data-group-id="9343847756-20">(</span><span class="p" data-group-id="9343847756-20">)</span><span class="p">,</span><span class="w">
    </span><span class="nf">loop</span><span class="p" data-group-id="9343847756-21">(</span><span class="n">Mod</span><span class="p">,</span><span class="w"> </span><span class="n">State</span><span class="p" data-group-id="9343847756-21">)</span><span class="p">.</span><span class="w">

</span><span class="nf">loop</span><span class="p" data-group-id="9343847756-22">(</span><span class="n">Mod</span><span class="p">,</span><span class="w"> </span><span class="n">State</span><span class="p" data-group-id="9343847756-22">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="k">receive</span><span class="w">
        </span><span class="p" data-group-id="9343847756-23">{</span><span class="ss">call</span><span class="p">,</span><span class="w"> </span><span class="n">From</span><span class="p">,</span><span class="w"> </span><span class="n">Req</span><span class="p" data-group-id="9343847756-23">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
            </span><span class="p" data-group-id="9343847756-24">{</span><span class="n">Res</span><span class="p">,</span><span class="w"> </span><span class="n">State2</span><span class="p" data-group-id="9343847756-24">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Mod</span><span class="p">:</span><span class="nf">handle_call</span><span class="p" data-group-id="9343847756-25">(</span><span class="n">Req</span><span class="p">,</span><span class="w"> </span><span class="n">State</span><span class="p" data-group-id="9343847756-25">)</span><span class="p">,</span><span class="w">
            </span><span class="n">From</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="p" data-group-id="9343847756-26">{</span><span class="n">Mod</span><span class="p">,</span><span class="w"> </span><span class="n">Res</span><span class="p" data-group-id="9343847756-26">}</span><span class="p">,</span><span class="w">
            </span><span class="nf">loop</span><span class="p" data-group-id="9343847756-27">(</span><span class="n">Mod</span><span class="p">,</span><span class="w"> </span><span class="n">State2</span><span class="p" data-group-id="9343847756-27">)</span><span class="p">;</span><span class="w">
        </span><span class="p" data-group-id="9343847756-28">{</span><span class="ss">cast</span><span class="p">,</span><span class="w"> </span><span class="n">Req</span><span class="p" data-group-id="9343847756-28">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
            </span><span class="n">State2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Mod</span><span class="p">:</span><span class="nf">handle_cast</span><span class="p" data-group-id="9343847756-29">(</span><span class="n">Req</span><span class="p">,</span><span class="w"> </span><span class="n">State</span><span class="p" data-group-id="9343847756-29">)</span><span class="p">,</span><span class="w">
            </span><span class="nf">loop</span><span class="p" data-group-id="9343847756-30">(</span><span class="n">Mod</span><span class="p">,</span><span class="w"> </span><span class="n">State2</span><span class="p" data-group-id="9343847756-30">)</span><span class="w">
    </span><span class="k">end</span><span class="p">.</span></code></pre><p>And a callback module <code class="inline">ch2.erl</code>:</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="4618678246-1">(</span><span class="ss">ch2</span><span class="p" data-group-id="4618678246-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="4618678246-2">(</span><span class="p" data-group-id="4618678246-3">[</span><span class="ss">start</span><span class="p">/</span><span class="mi">0</span><span class="p" data-group-id="4618678246-3">]</span><span class="p" data-group-id="4618678246-2">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="4618678246-4">(</span><span class="p" data-group-id="4618678246-5">[</span><span class="ss">alloc</span><span class="p">/</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">free</span><span class="p">/</span><span class="mi">1</span><span class="p" data-group-id="4618678246-5">]</span><span class="p" data-group-id="4618678246-4">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="4618678246-6">(</span><span class="p" data-group-id="4618678246-7">[</span><span class="ss">init</span><span class="p">/</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">handle_call</span><span class="p">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">handle_cast</span><span class="p">/</span><span class="mi">2</span><span class="p" data-group-id="4618678246-7">]</span><span class="p" data-group-id="4618678246-6">)</span><span class="p">.</span><span class="w">

</span><span class="nf">start</span><span class="p" data-group-id="4618678246-8">(</span><span class="p" data-group-id="4618678246-8">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">server</span><span class="p">:</span><span class="nf">start</span><span class="p" data-group-id="4618678246-9">(</span><span class="ss">ch2</span><span class="p" data-group-id="4618678246-9">)</span><span class="p">.</span><span class="w">

</span><span class="nf">alloc</span><span class="p" data-group-id="4618678246-10">(</span><span class="p" data-group-id="4618678246-10">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">server</span><span class="p">:</span><span class="nf">call</span><span class="p" data-group-id="4618678246-11">(</span><span class="ss">ch2</span><span class="p">,</span><span class="w"> </span><span class="ss">alloc</span><span class="p" data-group-id="4618678246-11">)</span><span class="p">.</span><span class="w">

</span><span class="nf">free</span><span class="p" data-group-id="4618678246-12">(</span><span class="n">Ch</span><span class="p" data-group-id="4618678246-12">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nc">server</span><span class="p">:</span><span class="nf">cast</span><span class="p" data-group-id="4618678246-13">(</span><span class="ss">ch2</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4618678246-14">{</span><span class="ss">free</span><span class="p">,</span><span class="w"> </span><span class="n">Ch</span><span class="p" data-group-id="4618678246-14">}</span><span class="p" data-group-id="4618678246-13">)</span><span class="p">.</span><span class="w">

</span><span class="nf">init</span><span class="p" data-group-id="4618678246-15">(</span><span class="p" data-group-id="4618678246-15">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">channels</span><span class="p" data-group-id="4618678246-16">(</span><span class="p" data-group-id="4618678246-16">)</span><span class="p">.</span><span class="w">

</span><span class="nf">handle_call</span><span class="p" data-group-id="4618678246-17">(</span><span class="ss">alloc</span><span class="p">,</span><span class="w"> </span><span class="n">Chs</span><span class="p" data-group-id="4618678246-17">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">alloc</span><span class="p" data-group-id="4618678246-18">(</span><span class="n">Chs</span><span class="p" data-group-id="4618678246-18">)</span><span class="p">.</span><span class="w"> </span><span class="c1">% =&gt; {Ch,Chs2}</span><span class="w">

</span><span class="nf">handle_cast</span><span class="p" data-group-id="4618678246-19">(</span><span class="p" data-group-id="4618678246-20">{</span><span class="ss">free</span><span class="p">,</span><span class="w"> </span><span class="n">Ch</span><span class="p" data-group-id="4618678246-20">}</span><span class="p">,</span><span class="w"> </span><span class="n">Chs</span><span class="p" data-group-id="4618678246-19">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">free</span><span class="p" data-group-id="4618678246-21">(</span><span class="n">Ch</span><span class="p">,</span><span class="w"> </span><span class="n">Chs</span><span class="p" data-group-id="4618678246-21">)</span><span class="p">.</span><span class="w"> </span><span class="c1">% =&gt; Chs2</span></code></pre><p>Notice the following:</p><ul><li>The code in <code class="inline">server</code> can be reused to build many different servers.</li><li>The server name, in this example the atom <code class="inline">ch2</code>, is hidden from the users of
the client functions. This means that the name can be changed without
affecting them.</li><li>The protocol (messages sent to and received from the server) is also hidden.
This is good programming practice and allows one to change the protocol
without changing the code using the interface functions.</li><li>The functionality of <code class="inline">server</code> can be extended without having to change <code class="inline">ch2</code>
or any other callback module.</li></ul><p>In <code class="inline">ch1.erl</code> and <code class="inline">ch2.erl</code> above, the implementation of <code class="inline">channels/0</code>, <code class="inline">alloc/1</code>,
and <code class="inline">free/2</code> has been intentionally left out, as it is not relevant to the
example. For completeness, one way to write these functions is given below. This
is an example only, a realistic implementation must be able to handle situations
like running out of channels to allocate, and so on.</p><p><a href="" id="channels-implementation"></a></p><pre><code class="makeup erlang" translate="no"><span class="nf">channels</span><span class="p" data-group-id="9677031673-1">(</span><span class="p" data-group-id="9677031673-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
   </span><span class="p" data-group-id="9677031673-2">{</span><span class="p">_</span><span class="n">Allocated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9677031673-3">[</span><span class="p" data-group-id="9677031673-3">]</span><span class="p">,</span><span class="w"> </span><span class="p">_</span><span class="n">Free</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">lists</span><span class="p">:</span><span class="nf">seq</span><span class="p" data-group-id="9677031673-4">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p" data-group-id="9677031673-4">)</span><span class="p" data-group-id="9677031673-2">}</span><span class="p">.</span><span class="w">

</span><span class="nf">alloc</span><span class="p" data-group-id="9677031673-5">(</span><span class="p" data-group-id="9677031673-6">{</span><span class="n">Allocated</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9677031673-7">[</span><span class="n">H</span><span class="p">|</span><span class="n">T</span><span class="p" data-group-id="9677031673-7">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">_</span><span class="n">Free</span><span class="p" data-group-id="9677031673-6">}</span><span class="p" data-group-id="9677031673-5">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
   </span><span class="p" data-group-id="9677031673-8">{</span><span class="n">H</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9677031673-9">{</span><span class="p" data-group-id="9677031673-10">[</span><span class="n">H</span><span class="p">|</span><span class="n">Allocated</span><span class="p" data-group-id="9677031673-10">]</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="p" data-group-id="9677031673-9">}</span><span class="p" data-group-id="9677031673-8">}</span><span class="p">.</span><span class="w">

</span><span class="nf">free</span><span class="p" data-group-id="9677031673-11">(</span><span class="n">Ch</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9677031673-12">{</span><span class="n">Alloc</span><span class="p">,</span><span class="w"> </span><span class="n">Free</span><span class="p" data-group-id="9677031673-12">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channels</span><span class="p" data-group-id="9677031673-11">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
   </span><span class="k">case</span><span class="w"> </span><span class="nc">lists</span><span class="p">:</span><span class="nf">member</span><span class="p" data-group-id="9677031673-13">(</span><span class="n">Ch</span><span class="p">,</span><span class="w"> </span><span class="n">Alloc</span><span class="p" data-group-id="9677031673-13">)</span><span class="w"> </span><span class="k">of</span><span class="w">
      </span><span class="ss">true</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
         </span><span class="p" data-group-id="9677031673-14">{</span><span class="nc">lists</span><span class="p">:</span><span class="nf">delete</span><span class="p" data-group-id="9677031673-15">(</span><span class="n">Ch</span><span class="p">,</span><span class="w"> </span><span class="n">Alloc</span><span class="p" data-group-id="9677031673-15">)</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9677031673-16">[</span><span class="n">Ch</span><span class="p">|</span><span class="n">Free</span><span class="p" data-group-id="9677031673-16">]</span><span class="p" data-group-id="9677031673-14">}</span><span class="p">;</span><span class="w">
      </span><span class="ss">false</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
         </span><span class="n">Channels</span><span class="w">
   </span><span class="k">end</span><span class="p">.</span></code></pre><p>Code written without using behaviours can be more efficient, but the increased
efficiency is at the expense of generality. The ability to manage all
applications in the system in a consistent manner is important.</p><p>Using behaviours also makes it easier to read and understand code written by
other programmers. Improvised programming structures, while possibly more
efficient, are always more difficult to understand.</p><p>The <code class="inline">server</code> module corresponds, greatly simplified, to the Erlang/OTP behaviour
<code class="inline">gen_server</code>.</p><p>The standard Erlang/OTP behaviours are:</p><ul><li><p><a href="gen_server_concepts.html">gen_server</a></p><p>For implementing the server of a client-server relation</p></li><li><p><a href="statem.html">gen_statem</a></p><p>For implementing state machines</p></li><li><p><a href="events.html">gen_event</a></p><p>For implementing event handling functionality</p></li><li><p><a href="sup_princ.html">supervisor</a></p><p>For implementing a supervisor in a supervision tree</p></li></ul><p>The compiler understands the module attribute <code class="inline">-behaviour(Behaviour)</code> and issues
warnings about missing callback functions, for example:</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="3268378217-1">(</span><span class="ss">chs3</span><span class="p" data-group-id="3268378217-1">)</span><span class="p">.</span><span class="w">
</span><span class="p">-</span><span class="na">behaviour</span><span class="p" data-group-id="3268378217-2">(</span><span class="ss">gen_server</span><span class="p" data-group-id="3268378217-2">)</span><span class="p">.</span><span class="w">
</span><span class="p">.</span><span class="p">.</span><span class="p">.</span><span class="w">

</span><span class="mi">3</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">c</span><span class="p" data-group-id="3268378217-3">(</span><span class="ss">chs3</span><span class="p" data-group-id="3268378217-3">)</span><span class="p">.</span><span class="w">
</span><span class="p">.</span><span class="o">/</span><span class="ss">chs3</span><span class="p">.</span><span class="nc">erl</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="w"> </span><span class="n">Warning</span><span class="p">:</span><span class="w"> </span><span class="ss">undefined</span><span class="w"> </span><span class="ss">call</span><span class="o">-</span><span class="ss">back</span><span class="w"> </span><span class="ss">function</span><span class="w"> </span><span class="ss">handle_call</span><span class="p">/</span><span class="mi">3</span><span class="w">
</span><span class="p" data-group-id="3268378217-4">{</span><span class="ss">ok</span><span class="p">,</span><span class="ss">chs3</span><span class="p" data-group-id="3268378217-4">}</span></code></pre><h2 id="applications" class="section-heading">
  <a href="#applications" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Applications</span>
</h2>
<p>Erlang/OTP comes with a number of components, each implementing some specific
functionality. Components are with Erlang/OTP terminology called <em>applications</em>.
Examples of Erlang/OTP applications are Mnesia, which has everything needed for
programming database services, and Debugger, which is used to debug Erlang
programs. The minimal system based on Erlang/OTP consists of the following two
applications:</p><ul><li>Kernel - Functionality necessary to run Erlang</li><li>STDLIB - Erlang standard libraries</li></ul><p>The application concept applies both to program structure (processes) and
directory structure (modules).</p><p>The simplest applications do not have any processes, but consist of a collection
of functional modules. Such an application is called a <em>library application</em>. An
example of a library application is STDLIB.</p><p>An application with processes is easiest implemented as a supervision tree using
the standard behaviours.</p><p>How to program applications is described in <a href="applications.html">Applications</a>.</p><h2 id="releases" class="section-heading">
  <a href="#releases" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Releases</span>
</h2>
<p>A <em>release</em> is a complete system made out from a subset of Erlang/OTP
applications and a set of user-specific applications.</p><p>How to program releases is described in <a href="release_structure.html">Releases</a>.</p><p>How to install a release in a target environment is described in
<a href="../../doc/system/create_target.html">Creating and Upgrading a Target System</a> in System Principles.</p><h2 id="release-handling" class="section-heading">
  <a href="#release-handling" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Release Handling</span>
</h2>
<p><em>Release handling</em> is upgrading and downgrading between different versions of a
release, in a (possibly) running system. How to do this is described in
<a href="release_handling.html">Release Handling</a>.</p>
</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="misc.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Support, Compatibility, Deprecations, and Removal
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="gen_server_concepts.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
gen_server Behaviour
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="Erlang System Documentation.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.32.2) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright © 1996-2023 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>

<script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    mermaid.initialize({
      startOnLoad: false,
      theme: document.body.className.includes("dark") ? "dark" : "default"
    });
    let id = 0;
    for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
        graphEl.innerHTML = svg;
        bindFunctions?.(graphEl);
        preEl.insertAdjacentElement("afterend", graphEl);
        preEl.remove();
      });
    }
  });
</script>

  </body>
</html>
