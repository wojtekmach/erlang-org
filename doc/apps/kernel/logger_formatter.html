<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.32.2">
    <meta name="project" content="kernel v10.0">


<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=27&q=">
<meta name="major-vsn" content="27">
    <title>logger_formatter — kernel v10.0</title>
    <link rel="stylesheet" href="dist/html-erlang-EBZIIHAS.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-DBC977C9.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-BHYOTRCH.js"></script>


  </head>
  <body data-type="modules" class="page-behaviour">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="kernel" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
kernel
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v10.0
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of kernel</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/erlang/otp/blob/OTP-27.0/lib/kernel/src/logger_formatter.erl#L20" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

    <span translate="no">logger_formatter</span> <small>behaviour</small>
    <small class="app-vsn" translate="no">(kernel v10.0)</small>

  </h1>


    <section id="moduledoc">
<p>Default formatter for Logger.</p><p>Each Logger handler has a configured formatter specified as a module and a
configuration term. The purpose of the formatter is to translate the log events
to a final printable string (<a href="../../apps/stdlib/unicode.html#t:chardata/0"><code class="inline">unicode:chardata()</code> </a>)
which can be written to the output device of the handler. See sections
<a href="logger_chapter.html#handlers">Handlers</a> and
<a href="logger_chapter.html#formatters">Formatters</a> in the Kernel User's Guide for more
information.</p><p><a href="logger_formatter.html#content"><code class="inline">logger_formatter</code></a> is the default formatter used by Logger.</p><h2 id="module-see-also" class="section-heading">
  <a href="#module-see-also" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">See Also</span>
</h2>
<p><a href="../../apps/stdlib/calendar.html"><code class="inline">calendar</code></a>, <a href="error_logger.html"><code class="inline">error_logger</code></a>, <a href="../../apps/stdlib/io.html"><code class="inline">io</code></a>, <a href="../../apps/stdlib/io_lib.html"><code class="inline">io_lib</code></a>, <a href="logger.html"><code class="inline">logger</code></a>, <a href="../../apps/stdlib/maps.html"><code class="inline">maps</code></a>,
<a href="../../apps/sasl/sasl_app.html"><code class="inline">sasl(6)</code></a>, <a href="../../apps/stdlib/unicode.html"><code class="inline">unicode</code></a></p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:config/0" data-no-tooltip translate="no">config()</a>

      </div>

        <div class="summary-synopsis"><p>The configuration term for <code class="inline">logger_formatter</code> is a <a href="../../apps/stdlib/maps.html">map</a>, and the
following keys can be set as configuration parameters</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:metakey/0" data-no-tooltip translate="no">metakey()</a>

      </div>

        <div class="summary-synopsis"></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:template/0" data-no-tooltip translate="no">template()</a>

      </div>

        <div class="summary-synopsis"><p>The template to be used by a logger formatter.</p></div>

    </div>

</div>
<div class="summary-callbacks summary">
  <h2>
    <a href="#callbacks">Callbacks</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:check_config/1" data-no-tooltip translate="no">check_config(Config)</a>

      </div>

        <div class="summary-synopsis"><p>The function is called by a Logger when formatter configuration is set or
modified. The formatter must validate the given configuration and return <code class="inline">ok</code> if
it is correct, and <code class="inline">{error,Reason}</code> if it is faulty.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:format/2" data-no-tooltip translate="no">format(LogEvent, Config)</a>

      </div>

        <div class="summary-synopsis"><p>The function can be called by a log handler to convert a log event term to a
printable string. The returned value can, for example, be printed as a log entry
to the console or a file using <a href="../../apps/stdlib/io.html#put_chars/1"><code class="inline">io:put_chars/1,2</code></a>.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#check_config/1" data-no-tooltip translate="no">check_config(Config)</a>

      </div>

        <div class="summary-synopsis"><p>The function is called by Logger when the formatter configuration for a handler
is set or modified. It returns <code class="inline">ok</code> if the configuration is valid, and
<code class="inline">{error,term()}</code> if it is faulty.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#format/2" data-no-tooltip translate="no">format(LogEvent, Config)</a>

      </div>

        <div class="summary-synopsis"><p>This the formatter callback function to be called from handlers.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:config/0">

  <div class="detail-header">
    <a href="#t:config/0" class="detail-link" data-no-tooltip title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">config()</h1>

      <a href="https://github.com/erlang/otp/blob/OTP-27.0/lib/kernel/src/logger_formatter.erl#L139" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(not exported)</span>

      <span class="note">(since OTP 21.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> config() ::
          #{chars_limit => <a href="../../apps/erts/erlang.html#t:pos_integer/0">pos_integer</a>() | unlimited,
            depth => <a href="../../apps/erts/erlang.html#t:pos_integer/0">pos_integer</a>() | unlimited,
            legacy_header => <a href="../../apps/erts/erlang.html#t:boolean/0">boolean</a>(),
            max_size => <a href="../../apps/erts/erlang.html#t:pos_integer/0">pos_integer</a>() | unlimited,
            report_cb => <a href="logger.html#t:report_cb/0">logger:report_cb</a>(),
            single_line => <a href="../../apps/erts/erlang.html#t:boolean/0">boolean</a>(),
            template => <a href="#t:template/0">template</a>(),
            time_designator => <a href="../../apps/erts/erlang.html#t:byte/0">byte</a>(),
            time_offset => <a href="../../apps/erts/erlang.html#t:integer/0">integer</a>() | [<a href="../../apps/erts/erlang.html#t:byte/0">byte</a>()]}.</pre>

      </div>

<p>The configuration term for <code class="inline">logger_formatter</code> is a <a href="../../apps/stdlib/maps.html">map</a>, and the
following keys can be set as configuration parameters:</p><ul><li><p><strong><code class="inline" id="chars_limit">chars_limit = integer() &gt; 0 | unlimited</code></strong> - A positive
integer representing the value of the option with the same name to be used
when calling <a href="../../apps/stdlib/io_lib.html#format/3"><code class="inline">io_lib:format/3</code></a>. This value limits the total number of
characters printed for each log event. Notice that this is a soft limit. For a
hard truncation limit, see option <code class="inline">max_size</code>.</p><p>Defaults to <code class="inline">unlimited</code>.</p></li><li><p><strong><code class="inline" id="depth">depth = integer() &gt; 0 | unlimited</code></strong> - A positive integer
representing the maximum depth to which terms shall be printed by this
formatter. Format strings passed to this formatter are rewritten. The format
controls ~p and ~w are replaced with ~P and ~W, respectively, and the value is
used as the depth parameter. For details, see <a href="../../apps/stdlib/io.html#format/2"><code class="inline">io:format/2,3</code></a>
in STDLIB.</p><p>Defaults to <code class="inline">unlimited</code>.</p></li><li><p><strong><code class="inline">legacy_header = boolean()</code></strong> - If set to <code class="inline">true</code> a header field is added to
logger_formatter's part of <code class="inline">Metadata</code>. The value of this field is a string
similar to the header created by the old <a href="error_logger.html"><code class="inline">error_logger</code></a> event handlers. It
can be included in the log event by adding the list
<code class="inline">[logger_formatter,header]</code> to the template. See the description of the
<a href="#t:template/0"><code class="inline">template/0</code></a> type for more information.</p><p>Defaults to <code class="inline">false</code>.</p></li><li><p><strong><code class="inline" id="max_size">max_size = integer() &gt; 0 | unlimited</code></strong> - A positive integer
representing the absolute maximum size a string returned from this formatter
can have. If the formatted string is longer, after possibly being limited by
<code class="inline">chars_limit</code> or <code class="inline">depth</code>, it is truncated.</p><p>Defaults to <code class="inline">unlimited</code>.</p></li><li><p><strong><code class="inline">report_cb = ``t:logger:report_cb/0</code></strong> - A report callback is used by the
formatter to transform log messages on report form to a format string and
arguments. The report callback can be specified in the metadata for the log
event. If no report callback exists in metadata, <code class="inline">logger_formatter</code> will use
<a href="logger.html#format_report/1"><code class="inline">logger:format_report/1</code></a> as default callback.</p><p>If this configuration parameter is set, it replaces both the default report
callback, and any report callback found in metadata. That is, all reports are
converted by this configured function.</p></li><li><p><strong><code class="inline">single_line = boolean()</code></strong> - If set to <code class="inline">true</code>, each log event is printed as
a single line. To achieve this, <code class="inline">logger_formatter</code> sets the field width to <code class="inline">0</code>
for all <code class="inline">~p</code> and <code class="inline">~P</code> control sequences in the format a string (see
<a href="../../apps/stdlib/io.html#format/2"><code class="inline">io:format/2</code></a>), and replaces all newlines in the message with <code class="inline">&quot;, &quot;</code>. White
spaces following directly after newlines are removed. Notice that newlines
added by the <code class="inline">template</code> parameter are not replaced.</p><p>Defaults to <code class="inline">true</code>.</p></li><li><p><strong><code class="inline" id="template">template =</code><a href="#t:template/0"><code class="inline">template/0</code></a></strong> - The template describes how the
formatted string is composed by combining different data values from the log
event. See the description of the <a href="#t:template/0"><code class="inline">template/0</code></a> type for more information
about this.</p></li><li><p><strong><code class="inline">time_designator = byte()</code></strong> - Timestamps are formatted according to
RFC3339, and the time designator is the character used as date and time
separator.</p><p>Defaults to <code class="inline">$T</code>.</p><p>The value of this parameter is used as the <code class="inline">time_designator</code> option to
<a href="../../apps/stdlib/calendar.html#system_time_to_rfc3339/2"><code class="inline">calendar:system_time_to_rfc3339/2</code></a>.</p></li><li><p><strong><code class="inline">time_offset = integer() | [byte()]</code></strong> - The time offset, either a string or
an integer, to be used when formatting the timestamp.</p><p>An empty string is interpreted as local time. The values <code class="inline">&quot;Z&quot;</code>, <code class="inline">&quot;z&quot;</code> or <code class="inline">0</code>
are interpreted as Universal Coordinated Time (UTC).</p><p>Strings, other than <code class="inline">&quot;Z&quot;</code>, <code class="inline">&quot;z&quot;</code>, or <code class="inline">&quot;&quot;</code>, must be on the form <code class="inline">±[hh]:[mm]</code>,
for example <code class="inline">&quot;-02:00&quot;</code> or <code class="inline">&quot;+00:00&quot;</code>.</p><p>Integers must be in microseconds, meaning that the offset <code class="inline">7200000000</code> is
equivalent to <code class="inline">&quot;+02:00&quot;</code>.</p><p>Defaults to an empty string, meaning that timestamps are displayed in local
time. However, for backwards compatibility, if the SASL configuration
parameter <a href="../../apps/sasl/sasl_app.html#utc_log"><code class="inline">utc_log</code></a><code class="inline">=true</code>, the default is
changed to <code class="inline">&quot;Z&quot;</code>, meaning that timestamps are displayed in UTC.</p><p>The value of this parameter is used as the <code class="inline">offset</code> option to
<a href="../../apps/stdlib/calendar.html#system_time_to_rfc3339/2"><code class="inline">calendar:system_time_to_rfc3339/2</code></a>.</p></li></ul>
  </section>
</section>
<section class="detail" id="t:metakey/0">

  <div class="detail-header">
    <a href="#t:metakey/0" class="detail-link" data-no-tooltip title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">metakey()</h1>

      <a href="https://github.com/erlang/otp/blob/OTP-27.0/lib/kernel/src/logger_formatter.erl#L235" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(not exported)</span>

      <span class="note">(since OTP 21.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> metakey() :: <a href="../../apps/erts/erlang.html#t:atom/0">atom</a>() | [<a href="../../apps/erts/erlang.html#t:atom/0">atom</a>()].</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:template/0">

  <div class="detail-header">
    <a href="#t:template/0" class="detail-link" data-no-tooltip title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">template()</h1>

      <a href="https://github.com/erlang/otp/blob/OTP-27.0/lib/kernel/src/logger_formatter.erl#L233" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(not exported)</span>

      <span class="note">(since OTP 21.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-type</span> template() :: [<a href="#t:metakey/0">metakey</a>() | {<a href="#t:metakey/0">metakey</a>(), <a href="#t:template/0">template</a>(), <a href="#t:template/0">template</a>()} | <a href="../../apps/stdlib/unicode.html#t:chardata/0">unicode:chardata</a>()].</pre>

      </div>

<p>The template to be used by a logger formatter.</p><p>The template is a list of atoms, atom lists, tuples and strings. The atoms
<code class="inline">level</code> or <code class="inline">msg</code>, are treated as placeholders for the severity level and the log
message, respectively. Other atoms or atom lists are interpreted as placeholders
for metadata, where atoms are expected to match top level keys, and atom lists
represent paths to sub keys when the metadata is a nested map. For example the
list <code class="inline">[key1,key2]</code> is replaced by the value of the <code class="inline">key2</code> field in the nested
map below. The atom <code class="inline">key1</code> on its own is replaced by the complete value of the
<code class="inline">key1</code> field. The values are converted to strings.</p><pre><code class="text">#{key1 =&gt; #{key2 =&gt; my_value,
            ...}
  ...}</code></pre><p>Tuples in the template express if-exist tests for metadata keys. For example,
the following tuple says that if <code class="inline">key1</code> exists in the metadata map, print
<code class="inline">&quot;key1=Value&quot;</code>, where <code class="inline">Value</code> is the value that <code class="inline">key1</code> is associated with in the
metadata map. If <code class="inline">key1</code> does not exist, print nothing.</p><pre><code class="text">{key1, [&quot;key1=&quot;,key1], []}</code></pre><p>Strings in the template are printed literally.</p><p>The default value for the <code class="inline">template</code> configuration parameter depends on the
value of the <code class="inline">single_line</code> and <code class="inline">legacy_header</code> configuration parameters as
follows.</p><p>The log event used in the examples is:</p><pre><code class="text">?LOG_ERROR(&quot;name: ~p~nexit_reason: ~p&quot;, [my_name, &quot;It crashed&quot;])</code></pre><ul><li><p><strong><code class="inline">legacy_header = true, single_line = false</code></strong> - Default template:
<code class="inline">[[logger_formatter,header],&quot;\n&quot;,msg,&quot;\n&quot;]</code></p><p>Example log entry:</p><pre><code class="text">=ERROR REPORT==== 17-May-2018::18:30:19.453447 ===
name: my_name
exit_reason: &quot;It crashed&quot;</code></pre><p>Notice that all eight levels can occur in the heading, not only <code class="inline">ERROR</code>,
<code class="inline">WARNING</code> or <code class="inline">INFO</code> as <a href="error_logger.html"><code class="inline">error_logger</code></a> produces. And microseconds are added
at the end of the timestamp.</p></li><li><p><strong><code class="inline">legacy_header = true, single_line = true</code></strong> - Default template:
<code class="inline">[[logger_formatter,header],&quot;\n&quot;,msg,&quot;\n&quot;]</code></p><p>Notice that the template is here the same as for <code class="inline">single_line=false</code>, but the
resulting log entry differs in that there is only one line after the heading:</p><pre><code class="text">=ERROR REPORT==== 17-May-2018::18:31:06.952665 ===
name: my_name, exit_reason: &quot;It crashed&quot;</code></pre></li><li><p><strong><code class="inline">legacy_header = false, single_line = true</code></strong> - Default template:
<code class="inline">[time,&quot; &quot;,level,&quot;: &quot;,msg,&quot;\n&quot;]</code></p><p>Example log entry:</p><pre><code class="text">2018-05-17T18:31:31.152864+02:00 error: name: my_name, exit_reason: &quot;It crashed&quot;</code></pre></li><li><p><strong><code class="inline">legacy_header = false, single_line = false</code></strong> - Default template:
<code class="inline">[time,&quot; &quot;,level,&quot;:\n&quot;,msg,&quot;\n&quot;]</code></p><p>Example log entry:</p><pre><code class="text">2018-05-17T18:32:20.105422+02:00 error:
name: my_name
exit_reason: &quot;It crashed&quot;</code></pre></li></ul>
  </section>
</section>

    </div>
  </section>

  <section id="callbacks" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#callbacks">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Callbacks</span>
    </h1>
    <div class="callbacks-list">
<section class="detail" id="c:check_config/1">

  <div class="detail-header">
    <a href="#c:check_config/1" class="detail-link" data-no-tooltip title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">check_config(Config)</h1>

      <a href="https://github.com/erlang/otp/blob/OTP-27.0/lib/kernel/src/logger_formatter.erl#L255" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since OTP 21.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> check_config(FConfig) -> ok | {error, Reason}
                          when FConfig :: <a href="logger.html#t:formatter_config/0">logger:formatter_config</a>(), Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>The function is called by a Logger when formatter configuration is set or
modified. The formatter must validate the given configuration and return <code class="inline">ok</code> if
it is correct, and <code class="inline">{error,Reason}</code> if it is faulty.</p><p>The following Logger API functions can trigger this callback:</p><ul><li><a href="logger.html#add_handler/3"><code class="inline">logger:add_handler/3</code></a></li><li><a href="logger.html#set_handler_config/2"><code class="inline">logger:set_handler_config/2,3</code></a></li><li><a href="logger.html#update_handler_config/2"><code class="inline">logger:update_handler_config/2,3</code></a></li><li><a href="logger.html#update_formatter_config/2"><code class="inline">logger:update_formatter_config/2</code></a></li></ul><p>See <a href="logger_formatter.html#content"><code class="inline">logger_formatter</code></a> for an example implementation. <a href="logger_formatter.html#content"><code class="inline">logger_formatter</code></a> is
the default formatter used by Logger.</p>
  </section>
</section>
<section class="detail" id="c:format/2">

  <div class="detail-header">
    <a href="#c:format/2" class="detail-link" data-no-tooltip title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">format(LogEvent, Config)</h1>

      <a href="https://github.com/erlang/otp/blob/OTP-27.0/lib/kernel/src/logger_formatter.erl#L268" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since OTP 21.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> format(LogEvent, FConfig) -> FormattedLogEntry
                    when
                        LogEvent :: <a href="logger.html#t:log_event/0">logger:log_event</a>(),
                        FConfig :: <a href="logger.html#t:formatter_config/0">logger:formatter_config</a>(),
                        FormattedLogEntry :: <a href="../../apps/stdlib/unicode.html#t:chardata/0">unicode:chardata</a>().</pre>

      </div>

<p>The function can be called by a log handler to convert a log event term to a
printable string. The returned value can, for example, be printed as a log entry
to the console or a file using <a href="../../apps/stdlib/io.html#put_chars/1"><code class="inline">io:put_chars/1,2</code></a>.</p><p>See <a href="logger_formatter.html#content"><code class="inline">logger_formatter</code></a> for an example implementation. <a href="logger_formatter.html#content"><code class="inline">logger_formatter</code></a> is
the default formatter used by Logger.</p>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="check_config/1">

  <div class="detail-header">
    <a href="#check_config/1" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">check_config(Config)</h1>

      <a href="https://github.com/erlang/otp/blob/OTP-27.0/lib/kernel/src/logger_formatter.erl#L719" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since OTP 21.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> check_config(Config) -> ok | {error, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} when Config :: <a href="#t:config/0">config</a>().</pre>

      </div>

<p>The function is called by Logger when the formatter configuration for a handler
is set or modified. It returns <code class="inline">ok</code> if the configuration is valid, and
<code class="inline">{error,term()}</code> if it is faulty.</p><p>The following Logger API functions can trigger this callback:</p><ul><li><a href="logger.html#add_handler/3"><code class="inline">logger:add_handler/3</code></a></li><li><a href="logger.html#set_handler_config/2"><code class="inline">logger:set_handler_config/2,3</code></a></li><li><a href="logger.html#update_handler_config/2"><code class="inline">logger:update_handler_config/2</code></a></li><li><a href="logger.html#update_formatter_config/2"><code class="inline">logger:update_formatter_config/2</code></a></li></ul>
  </section>
</section>
<section class="detail" id="format/2">

  <div class="detail-header">
    <a href="#format/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">format(LogEvent, Config)</h1>

      <a href="https://github.com/erlang/otp/blob/OTP-27.0/lib/kernel/src/logger_formatter.erl#L296" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since OTP 21.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-spec</span> format(LogEvent, Config) -> <a href="../../apps/stdlib/unicode.html#t:chardata/0">unicode:chardata</a>()
                when LogEvent :: <a href="logger.html#t:log_event/0">logger:log_event</a>(), Config :: <a href="#t:config/0">config</a>().</pre>

      </div>

<p>This the formatter callback function to be called from handlers.</p><p>The log event is processed as follows:</p><ul><li>If the message is on report form, it is converted to <code class="inline">{Format,Args}</code> by
calling the report callback. See section
<a href="logger_chapter.html#log_message">Log Message</a> in the Kernel User's Guide for
more information about report callbacks and valid forms of log messages.</li><li>The message size is limited according to the values of configuration
parameters <a href="logger_formatter.html#chars_limit"><code class="inline">chars_limit</code></a> and
<a href="logger_formatter.html#depth"><code class="inline">depth</code></a>.</li><li>The full log entry is composed according to the
<a href="logger_formatter.html#template"><code class="inline">template</code></a>.</li><li>If the final string is too long, it is truncated according to the value of
configuration parameter <a href="logger_formatter.html#max_size"><code class="inline">max_size</code></a>.</li></ul>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="kernel.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.32.2) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright © 1996-2023 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>

<script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    mermaid.initialize({
      startOnLoad: false,
      theme: document.body.className.includes("dark") ? "dark" : "default"
    });
    let id = 0;
    for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
        graphEl.innerHTML = svg;
        bindFunctions?.(graphEl);
        preEl.insertAdjacentElement("afterend", graphEl);
        preEl.remove();
      });
    }
  });
</script>

  </body>
</html>
