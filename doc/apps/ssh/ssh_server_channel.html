<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.32.2">
    <meta name="project" content="ssh v5.2">


<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=27&q=">
<meta name="major-vsn" content="27">
    <title>ssh_server_channel — ssh v5.2</title>
    <link rel="stylesheet" href="dist/html-erlang-EBZIIHAS.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-0D729093.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-BHYOTRCH.js"></script>


  </head>
  <body data-type="modules" class="page-behaviour">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="ssh" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
ssh
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v5.2
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of ssh</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/erlang/otp/blob/OTP-27.0/lib/ssh/src/ssh_server_channel.erl#L26" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

    <span translate="no">ssh_server_channel</span> <small>behaviour</small>
    <small class="app-vsn" translate="no">(ssh v5.2)</small>

  </h1>


    <section id="moduledoc">
<p>-behaviour(ssh_server_channel). (Replaces ssh_daemon_channel)</p><blockquote><h4 class="info">Note</h4><p>This module replaces ssh_daemon_channel.</p><p>The old module is still available for compatibility, but should not be used
for new programs. The old module will not be maintained except for some error
corrections</p></blockquote><p>SSH services (clients and servers) are implemented as channels that are
multiplexed over an SSH connection and communicates over the
<a href="http://www.ietf.org/rfc/rfc4254.txt">SSH Connection Protocol</a>. This module
provides a callback API that takes care of generic channel aspects for daemons,
such as flow control and close messages. It lets the callback functions take
care of the service (application) specific parts. This behavior also ensures
that the channel process honors the principal of an OTP-process so that it can
be part of a supervisor tree. This is a requirement of channel processes
implementing a subsystem that will be added to the <code class="inline">ssh</code> applications supervisor
tree.</p><blockquote><h4 class="info">Note</h4><p>When implementing a client subsystem handler, use
<a href="ssh_client_channel.html">-behaviour(ssh_client_channel)</a> instead.</p></blockquote>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-callbacks summary">
  <h2>
    <a href="#callbacks">Callbacks</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_msg/2" data-no-tooltip translate="no">handle_msg(Msg, State)</a>

      </div>

        <div class="summary-synopsis"><p>Handles other messages than SSH Connection Protocol, call, or cast messages sent
to the channel.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:handle_ssh_msg/2" data-no-tooltip translate="no">handle_ssh_msg/2</a>

      </div>

        <div class="summary-synopsis"><p>Handles SSH Connection Protocol messages that may need service-specific
attention. For details, see <a href="ssh_connection.html#t:event/0"><code class="inline">ssh_connection:event/0</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:init/1" data-no-tooltip translate="no">init(Args)</a>

      </div>

        <div class="summary-synopsis"><p>Makes necessary initializations and returns the initial channel state if the
initializations succeed.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#c:terminate/2" data-no-tooltip translate="no">terminate(Reason, State)</a>

      </div>

        <div class="summary-synopsis"><p>This function is called by a channel process when it is about to terminate.
Before this function is called,
<a href="ssh_connection.html#close/2">ssh_connection:close/2 </a>is called, if it has not been
called earlier. This function does any necessary cleaning up. When it returns,
the channel process terminates with reason <code class="inline">Reason</code>. The return value is
ignored.</p></div>

    </div>

</div>

  </section>


  <section id="callbacks" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#callbacks">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Callbacks</span>
    </h1>
    <div class="callbacks-list">
<section class="detail" id="c:handle_msg/2">

  <div class="detail-header">
    <a href="#c:handle_msg/2" class="detail-link" data-no-tooltip title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">handle_msg(Msg, State)</h1>

      <a href="https://github.com/erlang/otp/blob/OTP-27.0/lib/ssh/src/ssh_server_channel.erl#L99" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since OTP 21.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_msg(Msg :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) ->
                        {ok, State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | {stop, ChannelId :: <a href="ssh.html#t:channel_id/0">ssh:channel_id</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Handles other messages than SSH Connection Protocol, call, or cast messages sent
to the channel.</p><p>Possible Erlang 'EXIT' messages is to be handled by this function and all
channels are to handle the following message.</p><ul><li><strong><code class="inline">{ssh_channel_up, ``t:ssh:channel_id/0``, ``t:ssh:connection_ref/0``}</code></strong> -
This is the first message that the channel receives. This is especially useful
if the server wants to send a message to the client without first receiving a
message from it. If the message is not useful for your particular scenario,
ignore it by immediately returning <code class="inline">{ok, State}</code>.</li></ul>
  </section>
</section>
<section class="detail" id="c:handle_ssh_msg/2">

  <div class="detail-header">
    <a href="#c:handle_ssh_msg/2" class="detail-link" data-no-tooltip title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">handle_ssh_msg/2</h1>

      <a href="https://github.com/erlang/otp/blob/OTP-27.0/lib/ssh/src/ssh_server_channel.erl#L112" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since OTP 21.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> handle_ssh_msg(<a href="ssh_connection.html#t:event/0">ssh_connection:event</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) ->
                            {ok, State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | {stop, ChannelId :: <a href="ssh.html#t:channel_id/0">ssh:channel_id</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()}.</pre>

      </div>

<p>Handles SSH Connection Protocol messages that may need service-specific
attention. For details, see <a href="ssh_connection.html#t:event/0"><code class="inline">ssh_connection:event/0</code></a>.</p><p>The following message is taken care of by the <code class="inline">ssh_server_channel</code> behavior.</p><ul><li><strong><code class="inline">{closed, ``t:ssh:channel_id/0``}</code></strong> - The channel behavior sends a close
message to the other side, if such a message has not already been sent. Then
it terminates the channel with reason <code class="inline">normal</code>.</li></ul>
  </section>
</section>
<section class="detail" id="c:init/1">

  <div class="detail-header">
    <a href="#c:init/1" class="detail-link" data-no-tooltip title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">init(Args)</h1>

      <a href="https://github.com/erlang/otp/blob/OTP-27.0/lib/ssh/src/ssh_server_channel.erl#L67" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since OTP 21.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> init(Args :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) ->
                  {ok, State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                  {ok, State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), <a href="../../apps/erts/erlang.html#t:timeout/0">timeout</a>() | hibernate} |
                  {stop, Reason :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} |
                  ignore.</pre>

      </div>

<p>Makes necessary initializations and returns the initial channel state if the
initializations succeed.</p><p>The time-out values that can be returned have the same semantics as in a
<a href="../../apps/stdlib/gen_server.html"><code class="inline">gen_server</code></a>. If the time-out occurs, <a href="#c:handle_msg/2"><code class="inline">handle_msg/2</code></a> is called as
<a href="#c:handle_msg/2"><code class="inline">handle_msg(timeout, State)</code></a>.</p>
  </section>
</section>
<section class="detail" id="c:terminate/2">

  <div class="detail-header">
    <a href="#c:terminate/2" class="detail-link" data-no-tooltip title="Link to this callback">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this callback</span>
    </a>
    <h1 class="signature" translate="no">terminate(Reason, State)</h1>

      <a href="https://github.com/erlang/otp/blob/OTP-27.0/lib/ssh/src/ssh_server_channel.erl#L80" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(since OTP 21.0)</span>

  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">-callback</span> terminate(Reason :: normal | shutdown | {shutdown, <a href="../../apps/erts/erlang.html#t:term/0">term</a>()} | <a href="../../apps/erts/erlang.html#t:term/0">term</a>(), State :: <a href="../../apps/erts/erlang.html#t:term/0">term</a>()) -> <a href="../../apps/erts/erlang.html#t:term/0">term</a>().</pre>

      </div>

<p>This function is called by a channel process when it is about to terminate.
Before this function is called,
<a href="ssh_connection.html#close/2">ssh_connection:close/2 </a>is called, if it has not been
called earlier. This function does any necessary cleaning up. When it returns,
the channel process terminates with reason <code class="inline">Reason</code>. The return value is
ignored.</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="ssh.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.32.2) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright © 1996-2023 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>

<script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    mermaid.initialize({
      startOnLoad: false,
      theme: document.body.className.includes("dark") ? "dark" : "default"
    });
    let id = 0;
    for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
        graphEl.innerHTML = svg;
        bindFunctions?.(graphEl);
        preEl.insertAdjacentElement("afterend", graphEl);
        preEl.remove();
      });
    }
  });
</script>

  </body>
</html>
